# Aliases
alias c="cd $HOME/Code"
alias d="cd $HOME/Desktop"
alias dl="cd $HOME/Downloads"
alias h="cd $HOME/"
alias g=git
alias ls='ls -lah'
alias o='open .'
alias v='code .'
alias r='yarn run'

# System
alias update='sudo softwareupdate --install --all --verbose; brew update; brew upgrade; brew cleanup'

# Git
alias gsync='gpull && gpush'
alias gpull='git pull --rebase origin $(git rev-parse --abbrev-ref HEAD)'
alias gpush='git push origin $(git rev-parse --abbrev-ref HEAD)'
alias gboom="gsync && echo 'ðŸ’¥ Done ðŸ’¥'"
function gi() { curl "https://www.gitignore.io/api/$1" ;}

# Random
alias server='http-server'
alias android-emulator="$HOME/Library/Android/sdk/emulator/emulator -avd Nexus_5X_API_28"

# NPM
function npmls() {
  npm list --depth=0 "$1" 2>/dev/null
}

# Archive / unarchive
function archive() {
  tar cvJf "$1.tar.xz" "$1"
}
function unarchive() {
  tar xvJf "$1"
}

# VS Code extension management
alias vscode-extensions-save="code --list-extensions > $HOME/Code/dotfiles/vscode/extensions.txt && echo Done!"
alias vscode-extensions-install="cat $HOME/Code/dotfiles/vscode/extensions.txt | xargs -n 1 code --install-extension"

# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Appleâ€™s System Logs to improve shell startup speed
alias emptytrash='sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv "$HOME/.Trash"; sudo rm -rfv /private/var/log/asl/*.asl'

# Network
alias dig="dig @8.8.8.8"
alias flushdns="sudo killall -HUP mDNSResponder"
function scan() {
  nmap -T4 -A -v --max-rtt-timeout=500ms --initial-rtt-timeout=200ms --min-rtt-timeout=200ms --open --stats-every 5s "$1"
}
function ipinfo(){ curl "https://ipinfo.io/$1"; }

# Show all ip addresses
function ips() {
  if [[ $(uname) == 'Darwin' ]]; then
    interface='en'
  else
    interface='eth'
  fi
  for NUMBER in $(seq 0 9); do
    ip=$(ifconfig "$interface$NUMBER" 2>/dev/null |
      grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' |
      grep -Eo '([0-9]*\.){3}[0-9]*')

    if [ -n "$ip" ]; then
      echo "Local($interface$NUMBER): $ip"
    fi
  done
  echo "Remote:     $(curl -s https://ipinfo.io/ip)"
}

# Send notification via Slack
function notify() {
  curl -X POST --data-urlencode "payload={\"text\":\"$1\"}" "$SLACK_WEBHOOK" &> /dev/null
}
